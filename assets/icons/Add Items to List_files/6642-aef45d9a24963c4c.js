"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6642],{51959:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(35250);function a(e){var n=e.id,t=e.label,a=e.checked,i=e.onChange,s=e.disabled;return(0,r.jsxs)("div",{className:"form-check",children:[(0,r.jsx)("input",{className:"form-check-input float-left mr-2 mt-1 h-4 w-4 cursor-pointer appearance-none rounded-sm border border-gray-300 bg-white bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-600 checked:bg-blue-600 focus:outline-none",type:"checkbox",disabled:s,onChange:i,checked:a,id:n}),(0,r.jsx)("label",{className:"form-check-label text-gray-800 dark:text-gray-100",htmlFor:n,children:t})]})}},28512:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(39324),a=t(22830),i=t(4337),s=t(35250),o=t(70079),c=t(1454),l=t(94968),u=t(32004),d=t(21389),f=t(19012);function p(){var e=(0,i._)(["flex ml-auto gap-2"]);return p=function(){return e},e}var h=(0,l.vU)({copied:{id:"CopyButton.copied",defaultMessage:"Copied!",description:"Text displayed when the content has been copied"}});function g(e){var n=e.buttonText,t=e.onCopy,i=e.className,l=(0,a._)((0,o.useState)(!1),2),d=l[0],p=l[1],g=(0,f.Z)(),x=(0,o.useCallback)(function(e){e.stopPropagation(),t(),p(!0),setTimeout(function(){g()&&p(!1)},2e3)},[g,t]);return(0,s.jsxs)(s.Fragment,{children:[!d&&(0,s.jsxs)(m,{onClick:x,className:i,children:[(0,s.jsx)(c.j4u,{className:"icon-sm"}),n]}),d&&(0,s.jsxs)(m,{className:i,children:[(0,s.jsx)(c.UgA,{className:"icon-sm"}),n&&(0,s.jsx)(u.Z,(0,r._)({},h.copied))]})]})}var m=d.Z.button(p())},51973:function(e,n,t){var r=t(39324),a=t(22830),i=t(4337),s=t(35250),o=t(19841),c=t(70079),l=t(21389);function u(){var e=(0,i._)(["absolute right-0 top-1/2 -translate-y-1/2"]);return u=function(){return e},e}n.Z=c.forwardRef(function(e,n){var t=e.name,i=e.placeholder,l=e.type,u=e.displayName,f=e.onChange,p=e.onBlur,h=e.value,g=e.saveOnBlur,m=e.icon,x=e.onInputIconClick,v=e.className,b=e.autoComplete,y=e.autoFocus,w=e.onPressEnter,_=(0,a._)((0,c.useState)(h),2),j=_[0],k=_[1],N=(0,c.useCallback)(function(e){null==p||p(e),g&&k(e.target.value)},[p,g]),P=(0,c.useCallback)(function(e){null==f||f(e),g&&k(e.target.value)},[f,g]),C=(0,c.useCallback)(function(e){"Enter"===e.key&&w&&(e.preventDefault(),w())},[w]);(0,c.useEffect)(function(){k(h)},[h]);var I=(0,r._)({},g?{}:{value:h},g?{value:j}:{});return(0,s.jsxs)("div",{className:(0,o.default)("rounded-md border border-gray-300 px-3 py-2 shadow-sm focus-within:border-indigo-600 focus-within:ring-1 focus-within:ring-indigo-600 dark:bg-gray-700",v),children:[(0,s.jsx)("label",{htmlFor:t,className:"block text-xs font-medium text-gray-900 dark:text-gray-100",children:u}),(0,s.jsxs)("div",{className:(0,o.default)(u&&"mt-1","relative"),children:[(0,s.jsx)("input",(0,r._)({ref:n,type:l,name:t,id:t,className:(0,o.default)("block w-full border-0 p-0 text-gray-900 placeholder-gray-500 outline-none focus:ring-0 dark:bg-gray-700 dark:text-gray-100 sm:text-sm",null!=m&&"pr-6"),placeholder:i,onBlur:N,onChange:P,onKeyDown:C,autoComplete:b,autoFocus:y},I)),null!=m&&(0,s.jsx)(d,{onClick:x,children:(0,s.jsx)(m,{className:"icon-sm"})})]})]})});var d=l.Z.button(u())},89705:function(e,n,t){t.d(n,{J7:function(){return c},ay:function(){return u},mS:function(){return l}});var r=t(4337),a=t(21389);function i(){var e=(0,r._)(["\ntext-gray-700 border border-transparent inline-flex h-9 items-center justify-center gap-4 rounded-md bg-white px-3 text-sm\ndark:text-gray-200 dark:transparent dark:bg-transparent\nleading-none outline-none cursor-pointer\nhover:bg-gray-50 dark:hover:bg-[#494A54]\nfocus-visible:border-blue-500 dark:focus-visible:border-blue-500\nradix-state-active:text-gray-600 dark:radix-state-active::text-gray-400\nradix-disabled:cursor-auto radix-disabled:bg-transparent radix-disabled:text-gray-500 dark:radix-disabled:bg-transparent dark:radix-disabled:text-gray-500\n"]);return i=function(){return e},e}function s(){var e=(0,r._)(["\nrelative flex h-8 cursor-pointer select-none items-center rounded-md pl-3 pr-7 text-sm leading-none text-gray-700 hover:bg-gray-50 radix-disabled:pointer-events-none radix-highlighted:bg-gray-50 radix-disabled:text-gray-300 radix-highlighted:outline-none dark:text-gray-200 dark:hover:bg-[#2E2F33] dark:radix-highlighted:bg-[#2E2F33] dark:radix-disabled:text-gray-600 dark:radix-highlighted:hover:bg-[#2E2F33]\n"]);return s=function(){return e},e}function o(){var e=(0,r._)(["\nmin-w-[220px] rounded-lg bg-white dark:bg-gray-900 p-[5px] shadow-xs will-change-[opacity,transform] radix-side-bottom:animate-slideUpAndFade radix-side-left:animate-slideRightAndFade radix-side-right:animate-slideLeftAndFade radix-side-top:animate-slideDownAndFade\n"]);return o=function(){return e},e}var c=a.Z.button(i()),l=a.Z.div(s()),u=a.Z.div(o())},31486:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(35250),a=t(91809);function i(e){var n=e.plugin,t=n.manifest.name_for_human;return(0,r.jsxs)("div",{className:"flex gap-4 rounded bg-gray-50 px-4 py-2 dark:bg-gray-800",children:[(0,r.jsx)(a.Z,{url:n.manifest.logo_url,name:t,size:32,className:"flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h2",{className:"align-top text-base font-medium",children:t}),(0,r.jsx)("div",{className:"text-sm",children:n.manifest.description_for_human})]})]})}},48759:function(e,n,t){t.d(n,{bf:function(){return d},q6:function(){return u},rC:function(){return l}});var r=t(39324),a=t(70216),i=t(22830),s=t(35250),o=t(70079),c=t(1454);function l(e){var n=e.manifestValidationInfo,t=(0,a._)(e,["manifestValidationInfo"]),i=n.manifest_dict,o=n.warnings,c=n.errors;return(0,s.jsx)(f,(0,r._)({name:"manifest",content:i,warnings:o,errors:c},t))}function u(e){var n=e.apiValidationInfo,t=(0,a._)(e,["apiValidationInfo"]),i=n.openapi_spec_dict,o=n.warnings,c=n.errors;return(0,s.jsx)(f,(0,r._)({name:"OpenAPI spec",content:i,warnings:o,errors:c},t))}function d(e){var n=e.apiValidationInfo,t=(0,a._)(e,["apiValidationInfo"]),i=n.api_typescript;return i?(0,s.jsx)(p,(0,r._)({text:"Prompt for ChatGPT",content:i},t)):null}function f(e){var n=e.name,t=e.content,i=e.warnings,o=e.errors,l=(0,a._)(e,["name","content","warnings","errors"]),u=i&&i.length>0,d=o&&o.length>0,f="Validated ".concat(n),h=(0,s.jsx)(c.UgA,{className:"icon-sm text-green-500"});return d?(f="Errors in ".concat(n),h=(0,s.jsx)(c.q5L,{className:"icon-sm text-red-500"})):u&&(f="Warnings in ".concat(n),h=(0,s.jsx)(c.bcx,{className:"icon-sm  text-yellow-500"})),(0,s.jsx)(p,(0,r._)({icon:h,text:f,content:t,warnings:i,errors:o},l))}function p(e){var n=e.icon,t=e.text,r=e.content,a=e.warnings,l=e.errors,u=e.expanded,d=e.onChangeExpanded,f=(0,i._)((0,o.useState)(!1),2),p=f[0],h=f[1],g=null!=u?u:p,m=(0,o.useCallback)(function(){d?d(!g):h(function(e){return!e})},[g,d]);return(0,s.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[n&&(0,s.jsx)("div",{children:n}),(0,s.jsx)("div",{children:t}),(0,s.jsx)("div",{role:"button",className:"cursor-pointer text-gray-500 hover:text-gray-700",onClick:m,children:g?(0,s.jsx)(c.rH8,{className:"icon-sm"}):(0,s.jsx)(c.bTu,{className:"icon-sm"})})]}),g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 font-semibold",children:[l&&l.map(function(e,n){return(0,s.jsx)("div",{className:"text-red-500",children:e},n)}),a&&a.map(function(e,n){return(0,s.jsx)("div",{className:"text-yellow-500",children:e},n)})]}),r&&(0,s.jsx)("pre",{className:"overflow-auto whitespace-pre-wrap text-xs",children:"string"==typeof r?r:JSON.stringify(r,null,2)})]})]})}},15608:function(e,n,t){t.d(n,{$L:function(){return b},Bb:function(){return v},U$:function(){return m},Up:function(){return y},nT:function(){return _},qo:function(){return x},sd:function(){return j}});var r=t(21722),a=t(39324),i=t(71209),s=t(22830),o=t(81949),c=t(75883),l=t(13995),u=t(74686),d=t(70079),f=t(95137),p=t(73908),h=t(35101),g=t(14444);function m(e){var n=e.onSuccess,t=e.onError,r=e.onSettled,a=(0,l.NL)(),i=(0,u.D)(f.ZP.updatePluginUserSettings.bind(f.ZP),{onSuccess:function(e){v(e,a),b(e,a),n(e)},onError:t,onSettled:r}).mutate;return(0,d.useCallback)(function(e){i({pluginId:e,isInstalled:!0})},[i])}function x(e){var n=e.onSuccess,t=e.onError,r=e.onSettled,a=(0,l.NL)(),i=(0,u.D)(f.ZP.updatePluginUserSettings.bind(f.ZP),{onSuccess:function(e){(function(e,n){var t=g.Z;n.setQueryData(t,function(n){var t=(0,o._)((null==n?void 0:n.items)||[]),r=t.findIndex(function(n){return n.id===e.id});return -1!==r&&t.splice(r,1),{count:t.length,items:t}})})(e,a),b(e,a),n(e)},onError:t,onSettled:r}).mutate;return(0,d.useCallback)(function(e){i({pluginId:e,isInstalled:!1})},[i])}function v(e,n){var t=g.Z;n.setQueryData(t,function(n){var t=(0,o._)((null==n?void 0:n.items)||[]),r=t.findIndex(function(n){return n.id===e.id});return -1!==r?t[r]=e:t.push(e),{count:t.length,items:t}})}function b(e,n){var t=h.V;n.setQueriesData(t,function(n){if(!n)return n;var t=n.items.findIndex(function(n){return n.id===e.id});if(-1===t)return n;var r=(0,o._)(n.items);return r[t]=e,(0,i._)((0,a._)({},n),{items:r})})}function y(e,n){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e,n){var t,r;return(0,c.Jh)(this,function(a){switch(a.label){case 0:return t="".concat(window.location.origin,"/aip/").concat(e.id,"/oauth/callback"),[4,f.ZP.pluginOauthRedirect(e.id,t,n)];case 1:return r=a.sent(),window.location.href=r.redirect_uri,[2]}})})).apply(this,arguments)}function _(e){var n=e.manifest.auth;if("oauth"!==n.type||!e.oauth_client_id)return null;var t=new URLSearchParams({response_type:"code",client_id:e.oauth_client_id,redirect_uri:"".concat(window.location.origin,"/aip/").concat(e.id,"/oauth/callback"),scope:n.scope});return n.client_url.includes("slack.com")&&(t.delete("scope"),t.append("user_scope",n.scope)),"".concat(n.client_url,"?").concat(t)}function j(){var e,n=(0,s._)((0,d.useState)(!1),2),t=n[0],a=n[1];return{fetchManifestAndSpec:(0,d.useCallback)((e=(0,r._)(function(e){var n,t,r,i,s,o,l,u,d;return(0,c.Jh)(this,function(c){switch(c.label){case 0:n=e.domain,t=e.manifestAccessToken,r=e.onSuccess,i=e.onError,s=(0,p.NB)(n),c.label=1;case 1:if(c.trys.push([1,10,11,12]),a(!0),!(null!=s))return[3,3];return[4,(0,p.Zb)(s)];case 2:if(void 0===(o=c.sent()))return[2];return r({domain:s,scrapeManifestResponse:{plugin:o.plugin,manifest_validation_info:o.manifest_validation_info},apiValidationInfo:o.api_validation_info}),[3,9];case 3:return[4,f.ZP.scrapePluginManifest({domain:n,manifestAccessToken:t})];case 4:if(!(l=c.sent()).plugin)return[3,8];c.label=5;case 5:return c.trys.push([5,7,,8]),[4,f.ZP.getPluginApi({id:l.plugin.id})];case 6:return u=c.sent().api_validation_info,[3,8];case 7:return c.sent(),[3,8];case 8:r({domain:n,scrapeManifestResponse:l,apiValidationInfo:u,manifestAccessToken:t}),c.label=9;case 9:return[3,12];case 10:return d=c.sent(),i(null!=s?d:void 0),[3,12];case 11:return a(!1),[7];case 12:return[2]}})}),function(n){return e.apply(this,arguments)}),[]),isLoading:t}}},73908:function(e,n,t){t.d(n,{NB:function(){return m},Zb:function(){return x},cf:function(){return g},qZ:function(){return f},wR:function(){return d}});var r=t(21722),a=t(39324),i=t(75883),s=t(8844),o=t(1703),c=t(95954),l=t(95137),u=t(88798);function d(e){var n,t,r,a,i=null!==(a=null===(n=e.metadata)||void 0===n?void 0:null===(t=n.invoked_plugin)||void 0===t?void 0:t.http_api_call_data)&&void 0!==a?a:null===(r=e.metadata)||void 0===r?void 0:r.http_api_call_data;if(void 0!==i){if(e.author.role!==c.uU.Assistant){console.error("Refusing to make localhost plugin HTTP call from non-assistant message",e);return}if("object"!=typeof i||"string"!=typeof i.namespace||0===i.namespace.length||"string"!=typeof i.function_name||0===i.function_name.length||"string"!=typeof i.parent_message_id||0===i.parent_message_id.length||"string"!=typeof i.url||0===i.url.length||"string"!=typeof i.method||!["get","post","put","delete","patch"].includes(i.method)||!Array.isArray(i.qs_params)||i.qs_params.some(function(e){return!Array.isArray(e)||2!==e.length||"string"!=typeof e[0]||"string"!=typeof e[1]})||"object"!=typeof i.headers||Object.keys(i.headers).some(function(e){return"string"!=typeof e})||Object.values(i.headers).some(function(e){return"string"!=typeof e})||!(null===i.body||"object"==typeof i.body&&Object.keys(i.body).every(function(e){return"string"==typeof e}))||"string"!=typeof i.api_function_type||!["kwargs","chat"].includes(i.api_function_type)){console.error("Refusing to make localhost plugin HTTP call with invalid metadata",e);return}if(!/^https?:\/\/localhost:/.test(i.url)){console.error("Refusing to make localhost plugin HTTP call with non-localhost URL",e);return}return i}}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n;return(0,i.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(e){return h.apply(this,arguments)}(e)];case 1:return[2,t.sent()];case 2:return console.error("Error making localhost plugin HTTP call",n=t.sent()),[2,[{id:(0,s.Z)(),author:{role:c.uU.Tool,name:"plugin_service"},content:{content_type:c.PX.Text,parts:["Error making localhost plugin HTTP call: ".concat(n)]},recipient:"all"}]];case 3:return[2]}})})).apply(this,arguments)}function h(){return(h=(0,r._)(function(e){var n,t,r,o;function l(e){return Object.keys(e).map(function(e){return e.toLowerCase()})}return(0,i.Jh)(this,function(i){switch(i.label){case 0:var u;if(n={"content-type":"application/json"},u=[l(e.headers),l(n)].flat(),new Set(u).size!==u.length)throw Error("Refusing to make localhost plugin HTTP call with duplicate header keys");return t=e.url,e.qs_params.length>0&&(t=t+"?"+new URLSearchParams(e.qs_params)),r=void 0,null!==e.body&&(r=JSON.stringify(e.body)),[4,fetch(t,{method:e.method,headers:(0,a._)({},n,e.headers),body:r})];case 1:return[4,i.sent().text()];case 2:if(o=i.sent(),"chat"===e.api_function_type)return[2,[JSON.parse(o)]];if("kwargs"===e.api_function_type)return[2,[{id:(0,s.Z)(),author:{role:c.uU.Tool,name:"".concat(e.namespace,".").concat(e.function_name)},content:{content_type:c.PX.Text,parts:[o]},recipient:"all"}]];throw Error("Not implemented")}})})).apply(this,arguments)}function g(e){return!!m(e.domain)}function m(e){return/^localhost:\d+$/.test(e)?"http://".concat(e):/^https?:\/\/localhost:\d+$/.test(e)?e:null}function x(e){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e){var n,t,r,a,s,c;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,fetch(e+"/.well-known/ai-plugin.json")];case 1:return[4,i.sent().json()];case 2:return t=i.sent(),[3,4];case 3:return i.sent(),u.m.danger("Failed to fetch localhost manifest. Check to ensure your localhost is running and your localhost server has CORS enabled."),[2];case 4:if(null==(r=null==t?void 0:null===(n=t.api)||void 0===n?void 0:n.url))return u.m.danger("Localhost manifest is missing OpenAPI spec URL."),[2];if("pathname"===(a=function(e){try{return new URL(e),"full url"}catch(n){if(e.startsWith("/"))return"pathname";return"neither"}}(r)))r=e+r;else if("neither"===a)return u.m.danger("Localhost manifest OpenAPI spec URL is not a valid URL or path."),[2];i.label=5;case 5:return i.trys.push([5,8,,9]),[4,fetch(r)];case 6:return[4,i.sent().text()];case 7:return s=i.sent(),[3,9];case 8:return i.sent(),u.m.danger("Failed to fetch localhost OpenAPI spec."),[2];case 9:try{c=o.ZP.parse(s)}catch(e){}try{c=JSON.parse(s)}catch(e){}if(null==c)return u.m.danger("Failed to parse localhost OpenAPI spec as JSON or YAML."),[2];i.label=10;case 10:return i.trys.push([10,12,,13]),[4,l.ZP.createOrUpdateLocalhostPlugin({localhost:e,manifest:t,openapiSpec:c})];case 11:return[2,i.sent()];case 12:return i.sent(),u.m.danger("Failed to create or update localhost plugin at ".concat(e)),[3,13];case 13:return[2]}})})).apply(this,arguments)}},35101:function(e,n,t){t.d(n,{V:function(){return c},Z:function(){return l}});var r=t(81949),a=t(5268),i=t(62509),s=t(95137),o=t(54118),c=["approvedAip"];function l(e){var n=e.category,t=e.search,l=e.offset,u=e.limit,d=(0,i.kP)(),f=d.session,p=d.isAuthenticated,h=(0,o.Fl)().isPluginsAvailable;return(0,a.a)((0,r._)(c).concat([{category:n,search:t},{limit:u,offset:l}]),function(){return s.ZP.getApprovedPlugins({offset:l,limit:u,category:n,search:t,accessToken:null==f?void 0:f.accessToken})},{enabled:h&&p,keepPreviousData:!0,onError:function(e){console.error(e)}})}},85330:function(e,n,t){t.d(n,{dT:function(){return x},hZ:function(){return u},iO:function(){return d},p0:function(){return m},wu:function(){return v}});var r=t(81949),a=t(70079),i=t(78103),s=t(6948),o=t(75641),c=t(78931),l=t(14444),u=3,d=[["www.klarna.com","server.shop.app"],["apim.expedia.com","kayak.com"],["www.redfin.com","plugins.zillow.com"],["instacart.com","api.tasty.co"]],f="oai/enabledPluginIds";function p(e){var n=e.currentWorkspace;return(null==n?void 0:n.id)!=null&&(null==n?void 0:n.structure)==o.CZ.WORKSPACE?"".concat(f,"/").concat(n.id):f}function h(e){var n=Array.from(new Set(s.m.getItem(p(e))));return{enabledPluginIds:new Set(n.splice(0,u))}}var g=(0,i.ZP)(function(){return h(c.ec.getState())});function m(){var e=(0,l.C)().installedPlugins,n=g().enabledPluginIds;return(0,a.useMemo)(function(){return e.filter(function(e){return n.has(e.id)})},[n,e])}function x(e){e.length>u||g.setState(function(){return s.m.setItem(p(c.ec.getState()),e),{enabledPluginIds:new Set(e)}})}function v(e){g.setState(function(n){if(n.enabledPluginIds.size>=u)return n;var t=(0,r._)(n.enabledPluginIds).concat([e]);return s.m.setItem(p(c.ec.getState()),t),{enabledPluginIds:new Set(t)}})}c.ec.subscribe(function(e){g.setState(h(e))})},56817:function(e,n,t){t.d(n,{D7:function(){return o},Zr:function(){return i},_4:function(){return s},m1:function(){return a},ti:function(){return r}});var r="https://help.openai.com/en/collections/3943089-billing",a="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",i="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",s={WEBAPP:"chatgpt_web",MOBILE_IOS:"chatgpt_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android",GRANTED:"chatgpt_gratis_recepient",NOT_PURCHASED:"chatgpt_not_purchased"},o={ALREADY_PAID:"User is already paid"}},52481:function(e,n,t){t.d(n,{fv:function(){return U},ZP:function(){return O},Ub:function(){return L}});var r=t(39324),a=t(22830),i=t(4337),s=t(35250),o=t(70079),c=t(1454),l=t(32004),u=t(70671),d=t(94968),f=t(21389),p=t(11084),h=t(37334),g=t(78931),m=t(52787),x=t(67273),v=t(51959),b=t(28512),y=t(89368),w=t(98359),_=t(20525);function j(e){var n=e.children,t=e.sidebarOpen,r=e.onClose;return(0,s.jsx)(w.u.Root,{show:t,as:o.Fragment,children:(0,s.jsxs)(_.V,{as:"div",className:"relative z-10",onClose:r,children:[(0,s.jsx)("div",{className:"fixed inset-0"}),(0,s.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,s.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,s.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:(0,s.jsx)(w.u.Child,{as:o.Fragment,enter:"transform transition ease-in-out duration-100 sm:duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-300 sm:duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,s.jsx)(_.V.Panel,{className:"pointer-events-auto w-screen max-w-md border-l border-gray-100 dark:border-gray-700",children:(0,s.jsx)("div",{className:"h-full overflow-y-auto bg-white shadow-xl dark:bg-gray-800",children:n})})})})})})]})})}var k=t(81949),N=t(19841),P=t(95954);function C(e){var n=e.clientThreadId,t=(0,a._)((0,o.useState)([]),2),r=t[0],i=t[1],l=h.tQ.getThreadCurrentLeafId(n),u=h.tQ.getThreadConversationTurns(n,l),d=function(e){var t=h.tQ.getTree(n).getLeafFromNode(e);h.tQ.setThreadCurrentLeafId(n,t.id)},f=function(e){i(function(e){return(0,k._)(e).concat([l])}),d(e)};return(0,s.jsxs)(s.Fragment,{children:[r.length>0&&(0,s.jsxs)(x.z,{className:"absolute left-2 top-2",color:"neutral",onClick:function(){d(r[r.length-1]),i(function(e){return e.slice(0,-1)})},children:[(0,s.jsx)(c.lV_,{}),"Go back to ",r[r.length-1]]}),(0,s.jsx)("div",{className:"flex flex-col items-center gap-4 overflow-auto p-4 text-xs",children:u.map(function(e,t){var r=e.messages[0].nodeId,a=h.tQ.getTree(n),i=0!==t?a.getParent(r):null,o=null!=i?i.children.findIndex(function(e){return r===e}):0,c=null!=i?i.children:[],l=c.slice(0,o),u=c.slice(o+1),d="bg-gray-400";switch(e.role){case P.uU.User:d="bg-blue-500";break;case P.uU.Assistant:d="bg-gray-600"}return(0,s.jsxs)("div",{className:(0,N.default)("relative p-2",d),children:[(0,s.jsx)("div",{className:"absolute bottom-0 left-0 -ml-2 flex -translate-x-full gap-2 pl-2",children:l.map(function(e){return(0,s.jsx)(I,{variantId:e,onChangeItemInView:f},e)})}),(0,s.jsx)("div",{className:"absolute left-full top-0 ml-2 flex gap-2 pr-2",children:u.map(function(e){return(0,s.jsx)(I,{variantId:e,onChangeItemInView:f},e)})}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:e.messages.map(function(e){return(0,s.jsxs)("div",{className:"h-14 w-32 truncate bg-gray-200 p-1 text-black",children:[(0,s.jsx)("div",{className:"font-semibold",children:e.nodeId}),(0,s.jsx)("div",{className:"italic text-gray-600",children:e.message.author.role}),(0,s.jsx)("div",{children:(0,m.RR)(e.message)})]},e.nodeId)})})]},t)})})]})}function I(e){var n=e.variantId,t=e.onChangeItemInView;return(0,s.jsx)("button",{className:"w-32 truncate bg-gray-400 p-2 text-black opacity-50 hover:opacity-100",onClick:function(){t(n)},children:(0,s.jsx)("span",{className:"bg-gray-200 p-2",children:n})},n)}var S=t(51704);function T(){var e=(0,i._)(["overflow-y-auto h-full md:w-[250px] lg:w-[300px] xl:w-[350px] 2xl:w-[400px] md:border-l md:border-gray-100 md:dark:border-gray-700 bg-white dark:bg-gray-900"]);return T=function(){return e},e}function A(){var e=(0,i._)(["whitespace-pre-wrap text-sm"]);return A=function(){return e},e}function Z(){var e=(0,i._)(["px-6 py-4 flex flex-col gap-1 hover:bg-gray-50 dark:hover:bg-gray-500/10 cursor-pointer border-b dark:border-white/10 border-gray-200"]);return Z=function(){return e},e}function O(e){var n=e.children,t=e.title,a=e.icon,i=e.isOpen,o=e.slideOver,u=e.onClose,d=(0,s.jsxs)(F,{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 text-lg font-medium text-gray-900 dark:text-white",children:[(0,s.jsx)(a,{className:"icon-sm"}),t]}),(0,s.jsx)("div",{className:"mr-2 mt-2 flex h-7 items-center",children:(0,s.jsxs)("button",{type:"button",onClick:u,children:[(0,s.jsx)("span",{className:"sr-only",children:(0,s.jsx)(l.Z,(0,r._)({},J.closeSidebar))}),(0,s.jsx)(c.q5L,{className:"icon-md","aria-hidden":"true"})]})})]}),n]});return o?(0,s.jsx)(j,{sidebarOpen:i,onClose:u,children:d}):i?d:null}function R(e){var n=e.messages,t=e.setDebugMessageIndex,r=n.map(function(e,n){var r=e.author,a=r.role,i=r.name;return(0,s.jsxs)(V,{role:"button",onClick:function(){return t(n)},children:[(0,s.jsxs)("div",{className:"text-xs font-medium uppercase text-gray-400",children:[a,i&&i!==a&&" (".concat(i,")")," -> ",(0,m.Ej)(e),(0,s.jsx)("div",{className:"text-gray-600",children:e.id})]}),(0,s.jsx)("div",{className:"line-clamp-6",children:(0,m.RR)(e)})]},e.id)});return(0,s.jsx)(D,{children:r})}function E(){var e=(0,S.N)();return(0,s.jsx)("div",{className:"flex items-center justify-around gap-2 px-4 py-1 text-xs font-medium uppercase ",children:(0,s.jsx)(v.Z,{id:"force-paragen",label:"Force Parallel Gen",checked:e.forceParagen,onChange:function(){S.N.setState({forceParagen:!e.forceParagen})}})})}function U(e){var n=e.clientThreadId,t=e.isOpen,r=e.slideOver,i=e.onClose,l=(0,u.Z)(),d=h.tQ.getThreadCurrentLeafId(n),f=(0,h.u9)(n,d),m=(0,a._)((0,o.useState)(),2),x=m[0],v=m[1],w=(0,g.hz)(),_=(0,o.useCallback)(function(){v(void 0)},[]),j=(0,o.useCallback)(function(){var e=h.tQ.getTree(n);(0,p.S)(e.getTextFromThread(d))},[d,n]),k=(0,a._)((0,o.useState)(!1),2),N=k[0],P=k[1];return w.has("debug")?(0,s.jsxs)(O,{icon:c.cDN,title:l.formatMessage(J.debugTitle),isOpen:t,slideOver:r,onClose:i,children:[(0,s.jsx)("div",{className:"mb-2 flex items-center justify-around px-4 py-1 text-xs font-medium uppercase",children:(0,s.jsx)(M,{clientThreadId:n,messages:f})}),(0,s.jsxs)("div",{className:"flex items-center justify-around gap-2 px-4 py-1 text-xs font-medium uppercase",children:[(0,s.jsx)("div",{children:(0,s.jsx)(b.Z,{onCopy:j,buttonText:l.formatMessage(J.copyText)})}),(0,s.jsxs)("button",{className:"flex items-center justify-center gap-2",onClick:function(){return P(!0)},children:[(0,s.jsx)(c.PMT,{className:"icon-sm rotate-90"}),"View tree"]})]}),(0,s.jsx)(E,{}),(0,s.jsx)(R,{messages:f,setDebugMessageIndex:v}),void 0!==x&&(0,s.jsx)(y.Z,{isOpen:!0,onClose:_,type:"success",children:(0,s.jsx)("pre",{className:"max-h-[80vh] overflow-auto whitespace-pre-wrap text-xs",children:JSON.stringify(f[x],null,2)})},"DebugMessageModal-".concat(x)),N&&(0,s.jsx)(y.Z,{isOpen:!0,onClose:function(){return P(!1)},type:"success",size:"fullscreen",children:(0,s.jsx)(C,{clientThreadId:n})},"DebugTreeViewer")]}):null}function L(e,n){var t=JSON.stringify(n)+"\n",r=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download="messages-".concat(h.tQ.getServerThreadId(e),".jsonl"),i.click(),URL.revokeObjectURL(a)}function M(e){var n=e.clientThreadId,t=e.messages,a=(0,o.useCallback)(function(){L(n,t)},[n,t]);return(0,s.jsxs)(x.z,{onClick:a,color:"dark",size:"small",children:[(0,s.jsx)(c._hL,{className:"icon-sm"}),(0,s.jsx)(l.Z,(0,r._)({},J.downloadRawConversation))]})}var F=f.Z.div(T()),D=f.Z.pre(A()),V=f.Z.div(Z()),J=(0,d.vU)({debugTitle:{id:"DebugSidebar.debugTitle",description:"Title of the Debug sidebar",defaultMessage:"Debug"},copyText:{id:"DebugSidebar.copyText",description:"Button text to copy the content to clipboard",defaultMessage:"Copy text"},downloadRawConversation:{id:"DebugSidebar.downloadRawConversation",description:"Button text to download raw conversation",defaultMessage:"Download raw conversation"},closeSidebar:{id:"DebugSidebar.closeSidebar",description:"Aria-label for the close sidebar button",defaultMessage:"Close sidebar"}})},51704:function(e,n,t){t.d(n,{N:function(){return r}});var r=(0,t(78103).ZP)(function(){return{forceParagen:!1}})},19012:function(e,n,t){var r=t(70079);n.Z=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)(function(){return e.current=!0,function(){e.current=!1}},[]),(0,r.useCallback)(function(){return e.current},[])}},87389:function(e,n,t){t.d(n,{S:function(){return f}});var r=t(21722),a=t(39324),i=t(22830),s=t(75883),o=t(12155),c=t(60554),l=t(70079),u=t(62509),d=t(95137);function f(){var e,n,t=(0,c.useRouter)(),f=(0,u.kP)().session,p=(null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.idp)==="auth0",h=!!(null==f?void 0:null===(n=f.user)||void 0===n?void 0:n.mfa),g=(0,i._)((0,l.useState)(!1),2),m=g[0],x=g[1],v=(0,l.useCallback)((0,r._)(function(){var e;return(0,s.Jh)(this,function(n){if(e=new URL(t.asPath,window.location.origin).toString(),!p)throw Error("Only username/password users can enable MFA");if(!f)throw Error("No session found, cannot enable MFA");if("mocked"===f.authProvider)throw Error("Mock users can't enable MFA! Please setup Auth0 following the instructions in the README");return(0,o.signIn)(f.authProvider,{callbackUrl:e},(0,a._)({prompt:"login"},f.authProvider===u.Ho.OpenAI?{login_hint:(0,u.W_)({oai_enforce_mfa:!0,idp:"openai"})}:{oai_enforce_mfa:"true"})),[2]})}),[t.asPath,f,p]),b=(0,l.useCallback)((0,r._)(function(){var e;return(0,s.Jh)(this,function(n){switch(n.label){case 0:if(!p)throw Error("Only username/password users can disable MFA");if(!f)throw Error("No session found, cannot enable MFA");if("mocked"===f.authProvider)throw Error("Mock users can't enable MFA! Please setup Auth0 following the instructions in the README");return x(!0),[4,d.ZP.deleteMfa()];case 1:return n.sent(),[4,(0,o.signOut)({redirect:!1,callbackUrl:"/auth/login?next=".concat(encodeURIComponent(t.asPath))})];case 2:return e=n.sent(),x(!1),t.push(e.url),[2]}})}),[p,t,f]);return{setupMfa:v,isUsernamePassword:p,isLoggedInWithMfa:h,removeMfa:b,isLoading:m}}}}]);